"use strict";const t=require("../common/vendor.js"),i=require("./prefs.js");exports.useFloatingHint=function(){const e=t.reactive({visible:!1,text:"",interactive:!1,id:0});let n=null,s=0;try{const t=i.getLastHintTimestamp();Number.isFinite(t)&&(s=t)}catch(r){s=0}function o(){e.visible=!1,e.text="",e.interactive=!1,n&&(clearTimeout(n),n=null)}return t.onUnmounted((()=>{n&&(clearTimeout(n),n=null)})),{hintState:e,showHint:function(t,u=1800,c={}){const a=Date.now();if(a-s<300)return;s=a;try{i.setLastHintTimestamp(a)}catch(r){}const m=function(t,i){if(t&&"object"==typeof t)return{...t||{}};const e={};return Number.isFinite(t)&&(e.duration=t),i&&"object"==typeof i&&Object.assign(e,i),e}(u,c),l=void 0!==m.interactive&&!!m.interactive,v=Number.isFinite(m.duration)?m.duration:Number.isFinite(u)?u:1800,d=void 0===m.autoDismiss?!l:!!m.autoDismiss;e.text="string"==typeof t?t:"",e.visible=!!e.text,e.interactive=l,e.id=(e.id||0)+1,n&&(clearTimeout(n),n=null),d&&v>0&&(n=setTimeout((()=>{o()}),v))},hideHint:o}};
